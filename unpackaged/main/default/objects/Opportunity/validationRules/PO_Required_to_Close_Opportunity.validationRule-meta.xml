<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>PO_Required_to_Close_Opportunity</fullName>
    <active>true</active>
    <description>If the Account requires a PO Number and the Opportunity PO Number field is blank, the Opportunity cannot move to Closed Won.</description>
    <errorConditionFormula>AND( ISPICKVAL( Account.PO_Required__c , &quot;Mandatory&quot;),
OR (ISPICKVAL( Account.Type ,&#39;Customer&#39;) ,
ISPICKVAL( Account.Type ,&#39;Prospect&#39;)),
ISBLANK( PO_Number__c ) ,
ISCHANGED( StageName ) ,
OR(
ISPICKVAL( StageName , &quot;Closed Won&quot;),
ISPICKVAL( StageName , &quot;Close Pending&quot;)
)
)</errorConditionFormula>
    <errorMessage>Stage cannot be Close Pending/Closed won, when the PO Number field is Blank and PO Required is Mandatory.</errorMessage>
</ValidationRule>
